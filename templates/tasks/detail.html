{% extends "layout.html" %}
{% load i18n %}
{% block pagetitle %}{% trans "Task Details" %}{% endblock %}
{% block info_block %}
<section class="info">
    <h2><i class="fa fa-list-alt irm"></i> {% trans "Task Details" %}
    {% if perm.can_edit %} <a href="{% url "task_edit" object.id %}" title="{% trans "Edit task" %}"><i class="fa fa-pencil-square-o" style="margin-left:.5em"></i></a></h2>
    {% endif  %}
</section>
{% endblock %}
{% block content %}
<section class="container-fluid task-details" style="margin: 0 auto">
    <div class="row">
        <div class="col-md-{% if perm.can_do_admin_actions %}7{% else %}10{% endif %} col-md-offset-1">
            <div class="task-details-inner">
                <div class="row">
                    <div class="col-md-12">
                        <i class="fa fa-tag fa-fw irm"></i><strong>{% trans "Paper Title" %}</strong>
                        <h2 style="padding-left:1em;font-family: Georgia, 'Times New Roman', serif;text-align:justify">{{object.paper_title}}</h2>
                        <hr>
                        <i class="fa fa-file-text fa-fw irm"></i><strong>{% trans "Instructions" %}</strong>
                        <br>
                        <p style="white-space:pre-line;color:#555;padding-left:2em;padding-top:1em;text-align:justify;font-style:italic;line-height: 160%">
                            {{object.instructions}}
                        </p>
                    </div>
                </div>
                <hr>
                <div class="row" style="line-height: 160%">
                    <div class="col-md-4">
                        <i class="fa fa-list-alt fa-fw irm"></i><strong>{% trans "Assigment" %}</strong>: <em>{{object.get_assigment}}</em>
                        <br>
                        <i class="fa fa-clock-o fa-fw irm"></i><strong>{% trans "Urgency" %}</strong>: <em>{{object.get_urgency}}</em>
                        <br>
                        <i class="fa fa-files-o fa-fw irm"></i><strong>{% trans "Page Number" %}</strong>: <em>{{object.page_number}}</em>
                        <br>
                    </div>
                    <div class="col-md-4">
                        <i class="fa fa-arrows-v fa-fw irm"></i><strong>{% trans "Spacing" %}</strong>: <em>{{object.get_spacing}}</em>
                        <br>
                        <i class="fa fa-book fa-fw irm"></i><strong>{% trans "Discipline" %}</strong>: <em>{{object.get_discipline}}</em>
                        <br>
                        <i class="fa fa-certificate fa-fw irm"></i><strong>{% trans "Level" %}</strong>: <em>{{object.get_level}}</em>
                        <br>
                    </div>
                    <div class="col-md-4">
                        <i class="fa fa-building-o fa-fw irm"></i><strong>{% trans "Style" %}</strong>: <em>{{object.get_style}}</em>
                        <br>
                        <i class="fa fa-bars fa-fw irm"></i><strong>{% trans "Sources Number" %}</strong>: <em>{{object.source_number}}</em>
                        <br>
                        <i class="fa fa-paperclip fa-fw irm"></i><strong>{% trans "Attach" %}</strong>: <em>{{object.attach}}</em>
                        <br>
                    </div>
                </div>
                <hr>
                <div class="info-row">
                    <div class="info-col">
                        <i class="fa fa-lg fa-check-square-o"></i>{% trans "Status" %}: [{{object.get_status}}]
                    </div>
                    <div class="info-col">
                        <i class="fa fa-lg fa-calendar"></i>{% trans "Created" %}: {{object.created}}
                    </div>
                </div>
                <div class="btn-group">
                    {% if perm.can_submit %}
                    <form action="{% url 'task_submit' object.pk %}" method="post" style="display:inline">
                        {% csrf_token %}
                        <input type="hidden" value="{{co.UNPROCESSED}}" name="status">
                        <button type="submit" class="btn btn-primary btn-lg" role="button">
                            {% trans "Submit" %}<i class='fa fa-check-circle' style="margin-left:.5em"></i>
                        </button>
                    </form>
                    {% endif %}
                    {% if perm.can_assign %}
                    <form action="{% url 'task_assign' object.pk %}" method="post" style="display:inline">
                        {% csrf_token %}
                        <input type="hidden" value="{{co.ACTIVE}}" name="status" />
                        <button type="submit" class="btn btn-primary btn-lg" role="button">
                            {% trans "Take It" %}<i class='fa fa-download' style="margin-left:.5em"></i>
                        </button>
                    </form>
                    {% endif %}
                    {% if perm.can_finish %}
                    <form action="{% url 'task_finish' object.pk %}" method="post" style="display:inline">
                        {% csrf_token %}
                        <input type="hidden" value="{{co.FINISHED}}" name="status" >
                        <button type="submit" class="btn btn-primary btn-lg" role="button">
                            {% trans "Complete Task" %}<i class='fa fa-check-circle' style="margin-left:.5em"></i>
                        </button>
                    </form>
                    {% endif %}
                    {% if perm.can_do_admin_actions %}
                    <form action="{% url "task_reject" object.pk %}" method="post" style="display:inline">
                        {% csrf_token %}
                        <input type="hidden" value="{{co.REJECTED}}" name="status">
                        <button type="submit" class="btn btn-danger btn-lg" role="button">
                            {% trans "Reject" %} <i class="fa fa-times-circle" style="margin-left:.5em"></i>
                        </button>
                    </form>
                    <form action="{% url "task_suspect" object.pk %}" method="post" style="display:inline">
                        {% csrf_token %}
                        <input type="hidden" value="{{co.SUSPICIOUS}}" name="status">
                        <button type="submit" class="btn btn-default btn-lg" role="button">
                            {% trans "Suspect" %} <i class="fa fa-times-circle" style="margin-left:.5em"></i>
                        </button>
                    </form>
                    <form action="{% url "task_approve" object.pk %}" method="post" style="display:inline">
                        {% csrf_token %}
                        <input type="hidden" value="{{co.ACTIVE}}" name="status">
                        <button type="submit" class="btn btn-primary btn-lg">
                            {% trans "Approve" %} <i class="fa fa-check-circle" style="margin-left:.5em"></i>
                        </button>
                    </form>
                    {% endif %}
                </div>
                <!-- </div> -->
            </div>
            {% if perm.can_see_comments %}
            <div class="comments">
                <div class="lh">
                    <i class="fa fa-comments-o"></i><span class="title">{% trans "Comments" %}</span><span class="badge">{{comments|length}}</span>
                </div>
                <ul>
                    {% for comment in comments %}
                    <div class="pull-right text-muted" style="text-align:right; font-size:.8em">
                        <i class="fa fa-lg fa-calendar"></i> {% trans "Created" %}: {{comment.created}}
                    </div>
                    <h4> {{comment.title}} </h4>
                    <p>
                        {{comment.body}}
                    </p>
                    {% empty %}
                    <li>
                        {% trans "No comments yet" %}
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            {% if perm.can_comment %}
            <div class="comments-form" style="margin-right:100px">
                {% if messages %}
                {% for message in messages %}
                {{message}}
                {% endfor %}
                {% endif %}
                <form action="{% url "comment_new" task_id=object.pk %}" method="post">
                    {% csrf_token %}
                    <!-- {{ form.non_field_errors }} -->
                    <!-- {{ form.errors }} -->
                    <div class="form-group{% if form.title.errors %} has-error{% endif %}">
                        <!-- {{form.title.errors}} -->
                        <label>{% trans "Title" %}</label>
                        <input type="text" name="title" class="form-control" required/>
                    </div>
                    <div class="form-group{% if form.body.errors %} has-error{% endif %}">
                        <!-- {{form.body.errors}} -->
                        <label>{% trans "Body" %}</label>
                        <textarea name="body" class="form-control" rows="5" required></textarea>
                    </div>
                    <input type="hidden" name="rating" value="0"/>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary btn-lg" role="button" style="width:30%">
                            {% trans "Post" %}<i class='fa fa-comment-o' style="margin-left:.5em"></i>
                        </button>
                    </div>
                </form>
            </div>
            {% endif  %}
        </div>
        {% if perm.can_do_admin_actions %}
        <div class="col-md-3 admin-reports col-md-offset-1">
            <div class="well well-sm">
                <a class="pull-right adm-report-add" href="#"><i class="fa fa-plus-circle"></i></a>
                <strong>{% trans "Admin reports"%}</strong><span class="ilm badge">{{adm_reports|length}}</span>
                <div id="report-form">
                    <form>
                    <input type="text" class="form-control">
                    <textarea row="3" class="form-control"></textarea>
                    <div style="text-align:right"><button type="submit" class="btn btn-primary">Post<i class="fa fa-play-circle-o ilm"></i></button></div>
                    </form>
                </div>
            </div>
            <div id="adm-report-holder">
                <!-- loop -->
                <div class="panel panel-warning">
                    <div class="panel-heading">
                        <h3 class="panel-title"><a class="pull-right adm-report-ctrl" data-body-id="1" href="#"><i class="fa fa-caret-square-o-down"></i></a><a class="pull-right adm-report-del" id="rep-del-1" href="#" style="display:none"><i class="fa fa-times-circle"></i></a> Admin report #1 </h3>
                    </div>
                    <div id="body-id-1" class="panel-body small" style="display:none">
                        In need of a replacement for Goldsmith, Grohl contacted Alanis Morissette's touring drummer Taylor Hawkins to see if he could recommend anybody. Grohl was surprised when Hawkins volunteered his own services as drummer.[4] Hawkins made his debut with the group in time for the release of its second album, The Colour and the Shape, in May 1997. The album included the singles "Monkey Wrench", "My Hero", and "Everlong".
                    </div>
                </div>
                <!-- .loop -->
            </div>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}